(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{3625:function(t,e,a){},cceb:function(t,e,a){"use strict";var r=a("3625"),i=a.n(r);i.a},ed69:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-12"},[a("q-card",[a("q-table",{attrs:{data:t.mainTable.data,columns:t.columns,"row-key":"id",loading:t.mainTable.loading,selection:"multiple","rows-per-page-label":"Solicitudes por página","no-data-label":"Sin contrataciones","loading-label":"Cargando...",selected:t.selected},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{attrs:{"auto-width":""}},[a("q-checkbox",{model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),a("q-td",{key:"id",attrs:{props:e}},[t._v("\n                "+t._s(e.row.id)+"\n              ")]),a("q-td",{key:"image"},[a("q-img",{staticClass:"img-thumbnail",attrs:{src:t.imageFullPath(e.row.user_id,e.row.image_name),"spinner-color":"white"}})],1),a("q-td",{key:"title",attrs:{props:e}},[a("div",[a("strong",{attrs:{color:"purple"},domProps:{textContent:t._s(e.row.title)}})]),a("div",{staticClass:"my-table-details"},[t._v("\n                  "+t._s(t.parseDesc(e.row.description,30,"-"))+"\n                ")])]),a("q-td",{key:"price",attrs:{props:e}},[t._v("\n                "+t._s(e.row.price)+"\n                "),e.row.price?t._e():a("span",{domProps:{textContent:t._s("-")}})]),a("q-td",{key:"state",attrs:{props:e}},["pending"===e.row.state?a("q-badge",{attrs:{color:"warning",label:"Pendiente"}}):t._e(),"rejected"===e.row.state?a("q-badge",{attrs:{color:"negative",label:"Rechazada"}}):t._e(),"approved"===e.row.state?a("q-badge",{attrs:{color:"positive",label:"Aprobada"}}):t._e()],1),a("q-td",{key:"actions"},[a("q-btn",{attrs:{icon:"zoom_in",flat:"",color:"primary"},on:{click:function(a){return t.openModal(e.row)}}},[a("q-tooltip",[t._v("\n                    Ver solicitud\n                  ")])],1),t.checkCanQualify(e.row)?a("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",icon:"star",color:"orange-4"},on:{click:function(a){return t.openQualifyModal(e.row)}}},[a("q-tooltip",[t._v("\n                    Calificar el servicio\n                  ")])],1):t._e()],1)],1),a("q-tr",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"props.expand"}],attrs:{props:e}},[a("q-td",{attrs:{colspan:"100%"}},[a("div",{staticClass:"text-left"},[t._v("This is expand slot for row above: "+t._s(e.row.name)+".")])])],1)]}}])})],1),a("q-dialog",{model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("q-card",{staticStyle:{"min-width":"400px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Oferta #\n              "),t.rejectConfirmForm.rent_id?a("span",{domProps:{textContent:t._s(t.rejectConfirmForm.rent_id)}}):t._e()])]),"aprobadas"===t.$route.params.state?a("q-card-section",[a("q-markup-table",{staticClass:"bg-primary text-white"},[a("tbody",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Propietario")]),a("td",{staticClass:"text-right"},[a("span",{domProps:{textContent:t._s(t.rejectConfirmForm.data.owner_name+" "+t.rejectConfirmForm.data.owner_last_name)}})])]),a("tr",[a("th",{staticClass:"text-left"},[t._v("Teléfono")]),a("td",{staticClass:"text-right"},[a("span",{domProps:{textContent:t._s(""+t.rejectConfirmForm.data.owner_phone)}})])]),a("tr",[a("th",{staticClass:"text-left"},[t._v("Email")]),a("td",{staticClass:"text-right"},[a("span",{domProps:{textContent:t._s(t.rejectConfirmForm.data.owner_email)}})])])])])],1):t._e(),a("q-card-section",[a("div",{staticClass:"q-pa-sm"},[a("q-markup-table",{staticClass:"bg-grey-2"},[a("tbody",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Fecha de generación de oferta")]),t.rejectConfirmForm.data?a("td",{staticClass:"text-right"},[a("span",{domProps:{textContent:t._s(t.parseDate(t.rejectConfirmForm.data.created_at))}})]):t._e()]),a("tr",[a("th",{staticClass:"text-left"},[t._v("Fecha desde")]),a("td",{staticClass:"text-right"},[a("span",{domProps:{textContent:t._s(""+t.rejectConfirmForm.from)}})])]),a("tr",[a("th",{staticClass:"text-left"},[t._v("Fecha hasta")]),a("td",{staticClass:"text-right"},[a("span",{domProps:{textContent:t._s(""+t.rejectConfirmForm.to)}})])]),a("tr",[a("th",{staticClass:"text-left"},[t._v("Mensaje")]),a("td",{staticClass:"text-right"},[a("span",{domProps:{textContent:t._s(t.rejectConfirmForm.renterMessage)}})])])])])],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",flat:"",color:"primary"}})],1)],1)],1),a("form",{on:{submit:function(e){return e.preventDefault(),t.submitQualifyService()}}},[a("q-dialog",{model:{value:t.qualifyModal,callback:function(e){t.qualifyModal=e},expression:"qualifyModal"}},[a("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Calificar servicio")])]),a("q-card-section",{staticClass:"text-center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 text-center"},[a("h2",{staticClass:"text-h6 text-grey-8 q-ma-xs"},[t._v("Calidad")]),a("q-rating",{attrs:{size:"3.5em",color:"grey","color-selected":t.ratingColors},model:{value:t.qualifyForm.quality,callback:function(e){t.$set(t.qualifyForm,"quality",t._n(e))},expression:"qualifyForm.quality"}}),a("h2",{staticClass:"text-h6 text-grey-8 q-ma-xs"},[t._v("Tiempo de respuesta")]),a("q-rating",{attrs:{size:"3.5em",color:"grey","color-selected":t.ratingColors},model:{value:t.qualifyForm.response_time,callback:function(e){t.$set(t.qualifyForm,"response_time",t._n(e))},expression:"qualifyForm.response_time"}}),a("h2",{staticClass:"text-h6 text-grey-8 q-ma-xs"},[t._v("Veracidad")]),a("q-rating",{attrs:{size:"3.5em",color:"grey","color-selected":t.ratingColors},model:{value:t.qualifyForm.veracity,callback:function(e){t.$set(t.qualifyForm,"veracity",t._n(e))},expression:"qualifyForm.veracity"}})],1),a("div",{staticClass:"col-md-6"},[a("h2",{staticClass:"text-h6 text-grey-8"},[t._v("Promedio")]),t.prom?a("h2",{staticClass:"text-h3 q-ma-xs text-primary bolder",domProps:{textContent:t._s(t.prom)}}):t._e(),t.prom?t._e():a("h2",{staticClass:"text-h3 q-ma-xs text-primary"},[t._v("-")])])])]),a("q-card-section",[a("q-input",{attrs:{type:"textarea",rows:"2",label:"Puede agregar un mensaje"},model:{value:t.qualifyForm.message,callback:function(e){t.$set(t.qualifyForm,"message",e)},expression:"qualifyForm.message"}})],1),a("q-card-section",{staticClass:"text-right"},[a("q-btn",{attrs:{label:"Cancelar",flat:"",color:"primary"},on:{click:function(e){t.qualifyModal=!1}}}),a("q-btn",{attrs:{label:"Confirmar",type:"submit",disable:!t.qualifyForm.quality||!t.qualifyForm.veracity||!t.qualifyForm.response_time||t.submitQualifyServiceFlag,loading:t.submitQualifyServiceFlag,color:"primary"},on:{click:t.submitQualifyService},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-spinner-facebook")]},proxy:!0}])})],1)],1)],1)],1)],1)])},i=[],s=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("967e")),o=a.n(s),n=(a("96cf"),a("fa84")),l=a.n(n),c=a("c47a"),m=a.n(c),d=a("f09f"),u=a("2bb1"),p=a("a370"),f=a("8f8e"),h=a("4b7e"),y=a("daf4"),b=a("eaac"),g=a("58a8"),v=a("24e8"),q=a("bd08"),C=a("db86"),_=a("05c0"),x=(a("4bbf"),a("e94a"),a("c1df")),w=a.n(x),F=a("184b"),j=(a("ce42"),a("2f62")),k=a("2b0e"),P=a("2896"),M=a.n(P);function Q(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(a),!0).forEach((function(e){m()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var S=a("b5ae"),T=S.required;S.minLength;k["a"].use(M.a);var D={name:"ContractsByState",components:{QCard:d["a"],QTooltip:_["a"],QTable:b["a"],QMarkupTable:u["a"],QRating:y["a"],QCardSection:p["a"],QCardActions:h["a"],QTr:q["a"],QTd:C["a"],QDialog:v["a"],QBadge:g["a"],QCheckbox:f["a"]},mixins:[F["a"]],data:function(){return{ratingColors:["light-green-3","light-green-6","green","green-9","green-10"],tab:"service",step:1,loadingView:!1,submitQualifyServiceFlag:!1,filters:{one:""},openRejectModal:!1,openConfirmModal:!1,croppa:{},showModal:!1,mainTable:{data:[],loading:!1},selected:[],columns:[{name:"id",required:!0,label:"# Servicio",align:"left",style:"max-width: 40px",sortable:!0},{name:"image",label:"Imagen",field:"image",sortable:!0,align:"left",style:"width: 150px"},{name:"title",align:"left",label:"Título",field:"title",sortable:!0},{name:"price",label:"Precio",field:"price",sortable:!0,align:"left"},{name:"state",label:"Estado",field:"state",sortable:!0,align:"left"},{name:"actions",label:"Acciones",field:"actions",sortable:!0,align:"left"}],submitOnChange:!0,loadingDeleteImg:!1,brands:[],oldImages:[],loadingBrands:!1,qualifyForm:{rent_id:null,response_time:0,quality:0,veracity:0,message:null},qualifyModal:!1,rejectConfirmForm:{service_id:null,rent_id:null,data:null,message:null,state:null,renterMessage:null,from:null,rentState:null,to:null,renterLastName:null,renterName:null},moreParams:{type:"renter",state:this.$route.params.state},alert:!1}},validations:{qualifyForm:{rent_id:{required:T},response_time:{required:T},quality:{required:T},veracity:{required:T}}},computed:{prom:function(){var t=0;return this.qualifyForm.veracity&&this.qualifyForm.response_time&&this.qualifyForm.quality&&(t=(+this.qualifyForm.veracity+ +this.qualifyForm.response_time+ +this.qualifyForm.quality)/3,t=parseFloat(t).toFixed(1)),t},uploadUrl:function(){return"".concat("https://www.sabrinalainatti.com","/api/v1/images/store")},minDate:function(){return w()(new Date)},maxDate:function(){return null},appPath:function(){return"https://www.sabrinalainatti.com"}},watch:{$route:function(t,e){this.moreParams.state=t.params.state,this.initView()}},mounted:function(){this.initView()},methods:O(O({},Object(j["b"])({})),{},{openQualifyModal:function(t){this.qualifyForm.rent_id=t.rent_id,this.qualifyForm.quality=0,this.qualifyForm.veracity=0,this.qualifyForm.response_time=0,this.qualifyForm.message=null,this.qualifyModal=!0},checkCanQualify:function(t){var e=!1;return"approved"===t.state&&(e=!0),e},initView:function(){var t=this;return l()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loadingView=!0,t.getTableData(),t.loadingView=!1;case 3:case"end":return e.stop()}}),e)})))()},openRejectModals:function(){this.rejectConfirmForm.message=null,this.rejectConfirmForm.state="rejected",this.openRejectModal=!0},acceptRent:function(){},submitQualifyService:function(){var t=this;return l()(o.a.mark((function e(){var a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.submitQualifyServiceFlag=!0,e.next=4,t.$axios.post("api/v1/qualifications/resource",t.qualifyForm);case 4:a=e.sent,t.$events.fire("notify",a.data.msg),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$events.fire("notify","Error servidor");case 11:return e.prev=11,t.submitQualifyServiceFlag=!1,t.qualifyModal=!1,t.initView(),e.finish(11);case 16:case"end":return e.stop()}}),e,null,[[0,8,11,16]])})))()},imageFullPath:function(t,e){return"".concat(this.appPath,"/img/users/").concat(t,"/").concat(e)},openModal:function(t){this.rejectConfirmForm.rent_id=t.rent_id,this.rejectConfirmForm.service_id=t.id,this.rejectConfirmForm.renterMessage=t.message,this.rejectConfirmForm.from=t.rent_from,this.rejectConfirmForm.rentState=t.state,this.rejectConfirmForm.to=t.rent_to,this.rejectConfirmForm.renterLastName=t.renter_last_name,this.rejectConfirmForm.renterName=t.renter_name,this.rejectConfirmForm.data=t,this.showModal=!0},openModalRejectForm:function(){this.openRejectModal=!0},getTableData:function(){var t=this;return l()(o.a.mark((function e(){var a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.mainTable.loading=!0,e.next=4,t.$axios({method:"GET",url:"api/v1/rents/resource",params:t.moreParams});case 4:a=e.sent,t.mainTable.data=a.data.data,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:return e.prev=10,t.mainTable.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,8,10,13]])})))()},updateFrom:function(t){this.form.from=t,this.form.to=null}})},$=D,V=(a("cceb"),a("2877")),R=Object(V["a"])($,r,i,!1,null,"fe38b352",null);e["default"]=R.exports}}]);